---
// Página del blog refactorizada sin funcionalidades de creación
import Layout from '../layouts/Layout.astro';
import Typography from '../components/ui/Typography.astro';
import BlogCard from '../components/blog/BlogCard.astro';
import { getBlogPosts } from "../lib/blog";

const posts = await getBlogPosts();
---

<Layout 
  title="Blog - Muga OS" 
  description="Todas mis publicaciones del blog. Pensamientos, experiencias y aprendizajes sobre desarrollo y diseño."
  type="website"
>
  <!-- Header -->
  <section class="px-6 py-20" role="banner">
    <div class="text-center">
      <Typography as="h1" variant="title" class="mb-6">
        Blog
      </Typography>
      
      <Typography variant="body" class="max-w-2xl mx-auto mb-8 text-lg">
        Mis pensamientos, experiencias y aprendizajes. Todo versionado en Git.
      </Typography>
    </div>
  </section>

  <!-- Posts -->
  {posts.length === 0 ? (
    <section class="px-6 py-16" aria-labelledby="no-posts-title">
      <div class="text-center">
        <div class="diagonal-stripes bg-neutral-900/40 p-12 border border-neutral-800/60">
          <Typography as="h2" variant="heading" id="no-posts-title" class="mb-2">
            No hay publicaciones todavía
          </Typography>
          <Typography variant="caption">
            Las publicaciones aparecerán aquí cuando las agregues a la carpeta src/content/blog/.
          </Typography>
        </div>
      </div>
    </section>
  ) : (
    <section class="px-6 py-16" aria-labelledby="posts-list-title">
      <Typography as="h2" variant="heading" class="sr-only" id="posts-list-title">
        Lista de Publicaciones
      </Typography>
      
      <div class="space-y-8" role="list" aria-label="Lista de todas las publicaciones del blog">
        {posts.map((post) => (
          <div role="listitem">
            <BlogCard
              title={post.data.title}
              slug={post.slug}
              area={post.data.area}
              category={post.data.category}
              status={post.data.status}
              date={post.data.date}
              tags={post.data.tags}
              image={post.data.image}
              featured={false}
            />
          </div>
        ))}
      </div>
    </section>
  )}
</Layout>

<style>
  .diagonal-stripes {
    background-image: repeating-linear-gradient(
      -45deg,
      transparent,
      transparent 1px,
      rgba(115, 115, 115, 0.1) 3px,
      rgba(115, 115, 115, 0.1) 10px
    );
  }
</style>
