---
import Layout from '../layouts/Layout.astro';
import { getCollection } from 'astro:content';

const blogPosts = await getCollection('blog');
const projects = await getCollection('projects');
const articles = await getCollection('articles');
const resources = await getCollection('resources');
---

<Layout title="Debug - Muga OS" description="Página de debug para contenido">
  <!-- Header -->
  <section class="px-6 py-20">
    <div class="text-center">
      <h1 class="text-3xl md:text-4xl font-bold text-white mb-6 uppercase tracking-wide">
        Debug - Contenido
      </h1>
      <p class="text-lg text-neutral-300 max-w-2xl mx-auto leading-relaxed">
        Vista de debug para verificar todas las colecciones de contenido.
      </p>
    </div>
  </section>

  <!-- Blog Posts -->
  <section class="px-6 py-16">
    <h2 class="text-2xl font-bold text-white mb-8">Blog Posts ({blogPosts.length})</h2>
    <div class="space-y-4">
      {blogPosts.map((post) => (
        <div class="bg-neutral-900 p-4 border border-neutral-700">
          <h3 class="text-lg font-semibold text-white">{post.data.title}</h3>
          <p class="text-sm text-neutral-400">Slug: {post.slug}</p>
          <p class="text-sm text-neutral-400">Status: {post.data.status}</p>
          <p class="text-sm text-neutral-400">Date: {post.data.date.toISOString()}</p>
          {post.data.area && <p class="text-sm text-neutral-400">Area: {post.data.area}</p>}
          {post.data.tags.length > 0 && <p class="text-sm text-neutral-400">Tags: {post.data.tags.join(', ')}</p>}
          <a href={`/blog/${post.slug}`} class="text-blue-400 text-sm">Ver post</a>
        </div>
      ))}
    </div>
  </section>

  <!-- Projects -->
  <section class="px-6 py-16">
    <h2 class="text-2xl font-bold text-white mb-8">Projects ({projects.length})</h2>
    <div class="space-y-4">
      {projects.map((project) => (
        <div class="bg-neutral-900 p-4 border border-neutral-700">
          <h3 class="text-lg font-semibold text-white">{project.data.name}</h3>
          <p class="text-sm text-neutral-400">Area: {project.data.area}</p>
          <p class="text-sm text-neutral-400">Status: {project.data.status}</p>
          {project.data.objective && <p class="text-sm text-neutral-400">Objective: {project.data.objective}</p>}
        </div>
      ))}
    </div>
  </section>

  <!-- Articles -->
  <section class="px-6 py-16">
    <h2 class="text-2xl font-bold text-white mb-8">Articles ({articles.length})</h2>
    <div class="space-y-4">
      {articles.map((article) => (
        <div class="bg-neutral-900 p-4 border border-neutral-700">
          <h3 class="text-lg font-semibold text-white">{article.data.title}</h3>
          <p class="text-sm text-neutral-400">Slug: {article.slug}</p>
          <p class="text-sm text-neutral-400">Status: {article.data.status}</p>
          {article.data.category && <p class="text-sm text-neutral-400">Category: {article.data.category}</p>}
          <a href={`/articles/${article.slug}`} class="text-blue-400 text-sm">Ver artículo</a>
        </div>
      ))}
    </div>
  </section>

  <!-- Resources -->
  <section class="px-6 py-16">
    <h2 class="text-2xl font-bold text-white mb-8">Resources ({resources.length})</h2>
    <div class="space-y-4">
      {resources.map((resource) => (
        <div class="bg-neutral-900 p-4 border border-neutral-700">
          <h3 class="text-lg font-semibold text-white">{resource.data.name}</h3>
          <p class="text-sm text-neutral-400">Type: {resource.data.type}</p>
          {resource.data.description && <p class="text-sm text-neutral-400">Description: {resource.data.description}</p>}
        </div>
      ))}
    </div>
  </section>
</Layout>

<style>
  .diagonal-stripes {
    background-image: repeating-linear-gradient(
      -45deg,
      transparent,
      transparent 1px,
      rgba(115, 115, 115, 0.1) 3px,
      rgba(115, 115, 115, 0.1) 10px
    );
  }
</style>